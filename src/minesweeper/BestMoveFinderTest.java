package minesweeper;

import org.testng.annotations.Test;

import static minesweeper.Move.MoveType.MARK_BOMB;
import static minesweeper.Move.MoveType.OPEN;
import static org.testng.Assert.assertEquals;

@Test
public class BestMoveFinderTest {
    BestMoveFinder bestMoveFinder = new BestMoveFinder();

    @Test
    void test() {
        Board board = new Board(
                1,
                "1?"
        );
        check(board, new Move(0, 1, MARK_BOMB));
    }

    @Test
    void test3() {
        Board board = new Board(
                1,
                "?1x"
        );
        check(board, new Move(0, 0, OPEN));
    }

    @Test
    void test4() {
        Board board = new Board(
                1,
                "" +
                        "??\n" +
                        "??"
        );
        check(board, new Move(0, 0, OPEN));
    }

    @Test
    void test5() {
        Board board = new Board(
                2,

                "" +
                        "1??\n" +
                        "?.?\n" +
                        "???"
        );
        check(board, new Move(0, 2, OPEN));
    }

    @Test
    void testBug() {
        Board board = new Board(
                10,

                "" +
                        "......1???????????????????????\n" +
                        "1211.12???????????????????????\n" +
                        "x3x212x???????????????????????\n" +
                        "??????????????????????????????\n" +
                        "??????????????????????????????"
        );
        bestMoveFinder.findBestMove(board);
    }

    @Test
    void test6() {
        Board board = new Board(
                10,

                "" +
                        "....1?????????????????????????\n" +
                        "...12?????????????????????????\n" +
                        "1111x?????????????????????????\n" +
                        "1x112?????????????????????????\n" +
                        "11223?????????????????????????\n" +
                        ".12xx?????????????????????????\n" +
                        ".1x4??????????????????????????\n" +
                        ".12???????????????????????????\n" +
                        ".12???????????????????????????\n" +
                        ".1x???????????????????????????\n" +
                        "122???????????????????????????\n" +
                        "??????????????????????????????\n" +
                        "??????????????????????????????"
        );
        check(board, new Move(2, 5, OPEN));
    }

    //---------utils

    private void check(Board board, Move expected) {
        Move bestMove = bestMoveFinder.findBestMove(board);
        assertEquals(bestMove, expected);
    }
}